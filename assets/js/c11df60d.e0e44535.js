"use strict";(self.webpackChunkastreval_docs=self.webpackChunkastreval_docs||[]).push([[612],{4929:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"writing_block_tests","title":"\xc9crire des Tests pour un Bloc","description":"Introduction","source":"@site/docs/writing_block_tests.md","sourceDirName":".","slug":"/writing_block_tests","permalink":"/astreval-docs/docs/writing_block_tests","draft":false,"unlisted":false,"editUrl":"https://github.com/AstrevalRP/astreval-docs/tree/main/packages/create-docusaurus/templates/shared/docs/writing_block_tests.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Introduction \xe0 GameTest","permalink":"/astreval-docs/docs/gametest"},"next":{"title":"Utilisation des Structures dans GameTest","permalink":"/astreval-docs/docs/gametest_structures"}}');var i=s(4848),r=s(8453);const o={sidebar_position:3},l="\xc9crire des Tests pour un Bloc",c={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Ajouter un Test Simple",id:"ajouter-un-test-simple",level:2},{value:"Utiliser TestHelper.java",id:"utiliser-testhelperjava",level:2},{value:"M\xe9thodes Disponibles",id:"m\xe9thodes-disponibles",level:3},{value:"Exemple d&#39;Utilisation",id:"exemple-dutilisation",level:3},{value:"Ajouter le Fichier de Test dans fabric.mod.json",id:"ajouter-le-fichier-de-test-dans-fabricmodjson",level:2},{value:"Ajouter le Fichier de Test",id:"ajouter-le-fichier-de-test",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"\xe9crire-des-tests-pour-un-bloc",children:"\xc9crire des Tests pour un Bloc"})}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["Ce guide vous montrera comment \xe9crire des tests pour un bloc en utilisant GameTest sur le repo Astreval Jobs. Vous apprendrez \xe0 cr\xe9er des tests simples, \xe0 utiliser des structures pour les tests, et \xe0 exploiter les m\xe9thodes d'aide fournies par ",(0,i.jsx)(t.code,{children:"TestHelper.java"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,i.jsx)(t.p,{children:"Avant de commencer, assurez-vous d'avoir les \xe9l\xe9ments suivants :"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Une installation de Minecraft 1.20.1 avec Fabric Loader."}),"\n",(0,i.jsx)(t.li,{children:"Le mod Astreval Jobs install\xe9."}),"\n",(0,i.jsx)(t.li,{children:"Une bonne compr\xe9hension de base de Java et de l'API Minecraft."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"ajouter-un-test-simple",children:"Ajouter un Test Simple"}),"\n",(0,i.jsx)(t.p,{children:"Pour ajouter un test simple, suivez ces \xe9tapes :"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Cr\xe9er une nouvelle classe de test"})," :"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Cr\xe9ez un nouveau fichier Java dans le package ",(0,i.jsx)(t.code,{children:"fr.astreval.test.block"})," (ou un autre package appropri\xe9)."]}),"\n",(0,i.jsxs)(t.li,{children:["Nommez le fichier en fonction de ce que vous testez, par exemple ",(0,i.jsx)(t.code,{children:"MyBlockTest.java"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsxs)(t.strong,{children:["Impl\xe9menter l'interface ",(0,i.jsx)(t.code,{children:"FabricGameTest"})]})," :"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Impl\xe9mentez l'interface ",(0,i.jsx)(t.code,{children:"FabricGameTest"})," dans votre classe de test."]}),"\n",(0,i.jsxs)(t.li,{children:["Ajoutez des m\xe9thodes de test annot\xe9es avec ",(0,i.jsx)(t.code,{children:"@GameTest"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Voici un exemple de test simple pour un bloc :"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"package fr.astreval.test.block;\n\nimport fr.astreval.block.ModBlocks;\nimport net.fabricmc.fabric.api.gametest.v1.FabricGameTest;\nimport net.minecraft.entity.player.PlayerEntity;\nimport net.minecraft.item.ItemStack;\nimport net.minecraft.item.Items;\nimport net.minecraft.test.GameTest;\nimport net.minecraft.test.TestContext;\nimport net.minecraft.util.Hand;\nimport net.minecraft.util.math.BlockPos;\n\npublic class MyBlockTest implements FabricGameTest {\n\n  @GameTest(templateName = FabricGameTest.EMPTY_STRUCTURE)\n  public void useBoneMeal(TestContext context) {\n    BlockPos pos = new BlockPos(1, 1, 1);\n    context.setBlockState(pos, ModBlocks.MY_BLOCK.getDefaultState());\n\n    PlayerEntity player = context.createMockSurvivalPlayer();\n    ItemStack boneMealStack = new ItemStack(Items.BONE_MEAL);\n    player.setStackInHand(Hand.MAIN_HAND, boneMealStack);\n    context.useBlock(pos, player);\n\n    context.expectBlockProperty(pos, ModBlocks.MY_BLOCK.getAgeProperty(), 1);\n\n    context.complete();\n  }\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"utiliser-testhelperjava",children:"Utiliser TestHelper.java"}),"\n",(0,i.jsx)(t.p,{children:"TestHelper.java propose plusieurs m\xe9thodes pour simplifier l'\xe9criture des tests. Ces m\xe9thodes incluent des fonctions pour simuler l'utilisation d'items par un joueur et pour v\xe9rifier que le nombre d'items drop\xe9s est dans une plage sp\xe9cifique."}),"\n",(0,i.jsx)(t.h3,{id:"m\xe9thodes-disponibles",children:"M\xe9thodes Disponibles"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"abstractPlayerUseItemOnBlock(TestContext context, BlockPos pos, Item stack)"})," : Simule l'utilisation d'un item par un joueur sur un bloc."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"abstractPlayerUseEmptyItemOnBlock(TestContext context, BlockPos pos)"})," : Simule l'utilisation d'un item vide par un joueur sur un bloc."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"expectItemsInRange(TestContext context, Item item, BlockPos pos, double radius, int minAmount, int maxAmount)"})," : V\xe9rifie que le nombre d'items drop\xe9s est dans une plage sp\xe9cifique."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"exemple-dutilisation",children:"Exemple d'Utilisation"}),"\n",(0,i.jsx)(t.p,{children:"Voici un exemple de test utilisant TestHelper :"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// ... existing code ...\n\nimport fr.astreval.test.utils.TestHelper;\n\npublic class MyBlockTest implements FabricGameTest {\n\n  @GameTest(templateName = FabricGameTest.EMPTY_STRUCTURE)\n  public void useScythe(TestContext context) {\n    BlockPos pos = new BlockPos(1, 1, 1);\n    context.setBlockState(pos, ModBlocks.MY_BLOCK.getDefaultState());\n\n    TestHelper.abstractPlayerUseItemOnBlock(context, pos, ModItems.IRON_SCYTHE);\n\n    TestHelper.expectItemsInRange(context, ModBlocks.MY_BLOCK.asItem(), pos, 1.0, 2, 3);\n\n    context.complete();\n  }\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"ajouter-le-fichier-de-test-dans-fabricmodjson",children:"Ajouter le Fichier de Test dans fabric.mod.json"}),"\n",(0,i.jsxs)(t.p,{children:["Pour que vos tests soient ex\xe9cut\xe9s, vous devez ajouter le fichier de test dans le fichier ",(0,i.jsx)(t.code,{children:"fabric.mod.json"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"ajouter-le-fichier-de-test",children:"Ajouter le Fichier de Test"}),"\n",(0,i.jsx)(t.p,{children:"Localiser le Fichier :"}),"\n",(0,i.jsxs)(t.p,{children:["Le fichier se trouve dans ",(0,i.jsx)(t.code,{children:"src/main/resources/fabric.mod.json"}),".\nAjouter le Chemin du Fichier de Test :"]}),"\n",(0,i.jsx)(t.p,{children:"Ajoutez le chemin de votre fichier de test dans la section entrypoints sous fabric-gametest.\nExemple :"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  ...\n  "entrypoints": {\n   ...\n    "fabric-gametest": [\n      "fr.astreval.test.ModTests",\n      "fr.astreval.test.block.SquaringStationBlockTest",\n      "fr.astreval.test.block.BushBlockTest",\n      "fr.astreval.test.block.MushroomPlantBlockTest",\n      "fr.astreval.test.item.FertilizerBagTest",\n      "fr.astreval.test.item.SeedsTest",\n      "fr.astreval.test.block.MyBlockTest" // Ajoutez votre fichier de test ici\n    ]\n  },\n  ...\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(t.p,{children:"Vous avez maintenant les bases pour \xe9crire des tests pour un bloc en utilisant GameTest sur le repo Astreval Jobs. Utilisez les structures pour d\xe9finir des environnements de test, exploitez les m\xe9thodes d'aide de TestHelper.java, et n'oubliez pas d'ajouter vos fichiers de test dans fabric.mod.json."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>l});var n=s(6540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);